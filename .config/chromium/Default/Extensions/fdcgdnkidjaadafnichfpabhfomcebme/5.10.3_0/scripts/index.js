!function e(n,t,o){function r(a,u){if(!t[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[a]={exports:{}};n[a][0].call(l.exports,function(e){var t=n[a][1][e];return r(t?t:e)},l,l.exports,e,n,t,o)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,n,t){!function(t,o){"object"==typeof n&&n.exports&&"function"==typeof e?n.exports=o():"function"==typeof define&&"object"==typeof define.amd?define(o):t.log=o()}(this,function(){function e(e){return typeof console!==s&&(void 0!==console[e]?n(console,e):void 0!==console.log?n(console,"log"):u)}function n(e,n){var t=e[n];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch(n){return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function t(e,n){return function(){typeof console!==s&&(o(n),a[e].apply(a,arguments))}}function o(e){for(var n=0;n<c.length;n++){var t=c[n];a[t]=n<e?u:a.methodFactory(t,e)}}function r(e){var n=(c[e]||"silent").toUpperCase();try{return void(window.localStorage.loglevel=n)}catch(e){}try{window.document.cookie="loglevel="+n+";"}catch(e){}}function i(){var e;try{e=window.localStorage.loglevel}catch(e){}if(typeof e===s)try{e=/loglevel=([^;]+)/.exec(window.document.cookie)[1]}catch(e){}void 0===a.levels[e]&&(e="WARN"),a.setLevel(a.levels[e],!1)}var a={},u=function(){},s="undefined",c=["trace","debug","info","warn","error"];a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=function(n,o){return e(n)||t(n,o)},a.setLevel=function(e,n){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(n!==!1&&r(e),o(e),typeof console===s&&e<a.levels.SILENT)return"No console available for logging"},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var l=typeof window!==s?window.log:void 0;return a.noConflict=function(){return typeof window!==s&&window.log===a&&(window.log=l),a},i(),a})},{}],2:[function(e,n,t){!function(e,o){"use strict";var r="0.7.12",i="",a="?",u="function",s="undefined",c="object",l="string",d="major",f="model",p="name",m="type",g="vendor",w="version",h="architecture",v="console",b="mobile",y="tablet",_="smarttv",x="wearable",L="embedded",k={extend:function(e,n){var t={};for(var o in e)n[o]&&n[o].length%2===0?t[o]=n[o].concat(e[o]):t[o]=e[o];return t},has:function(e,n){return"string"==typeof e&&n.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},E={rgx:function(){for(var e,n,t,r,i,a,l,d=0,f=arguments;d<f.length&&!a;){var p=f[d],m=f[d+1];if(typeof e===s){e={};for(r in m)m.hasOwnProperty(r)&&(i=m[r],typeof i===c?e[i[0]]=o:e[i]=o)}for(n=t=0;n<p.length&&!a;)if(a=p[n++].exec(this.getUA()))for(r=0;r<m.length;r++)l=a[++t],i=m[r],typeof i===c&&i.length>0?2==i.length?typeof i[1]==u?e[i[0]]=i[1].call(this,l):e[i[0]]=i[1]:3==i.length?typeof i[1]!==u||i[1].exec&&i[1].test?e[i[0]]=l?l.replace(i[1],i[2]):o:e[i[0]]=l?i[1].call(this,l,i[2]):o:4==i.length&&(e[i[0]]=l?i[3].call(this,l.replace(i[1],i[2])):o):e[i]=l?l:o;d+=2}return e},str:function(e,n){for(var t in n)if(typeof n[t]===c&&n[t].length>0){for(var r=0;r<n[t].length;r++)if(k.has(n[t][r],e))return t===a?o:t}else if(k.has(n[t],e))return t===a?o:t;return e}},I={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,w],[/(opios)[\/\s]+([\w\.]+)/i],[[p,"Opera Mini"],w],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],w],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[p,w],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],w],[/(edge)\/((\d+)?[\w\.]+)/i],[p,w],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],w],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],w],[/(micromessenger)\/([\w\.]+)/i],[[p,"WeChat"],w],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[w,[p,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[p,/(.+)/,"$1 WebView"],w],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[w,[p,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[p,w],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[p,"UCBrowser"],w],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],w],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],w],[/;fbav\/([\w\.]+);/i],[w,[p,"Facebook"]],[/fxios\/([\w\.-]+)/i],[w,[p,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[w,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[w,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[w,E.str,I.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,w],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,g,[m,y]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[g,"Apple"],[m,y]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[g,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[g,f,[m,y]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[g,"Amazon"],[m,y]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,E.str,I.device.amazon.model],[g,"Amazon"],[m,b]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,g,[m,b]],[/\((ip[honed|\s\w*]+);/i],[f,[g,"Apple"],[m,b]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[g,f,[m,b]],[/\(bb10;\s(\w+)/i],[f,[g,"BlackBerry"],[m,b]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[f,[g,"Asus"],[m,y]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[g,"Sony"],[f,"Xperia Tablet"],[m,y]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[g,"Sony"],[f,"Xperia Phone"],[m,b]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[g,f,[m,v]],[/android.+;\s(shield)\sbuild/i],[f,[g,"Nvidia"],[m,v]],[/(playstation\s[34portablevi]+)/i],[f,[g,"Sony"],[m,v]],[/(sprint\s(\w+))/i],[[g,E.str,I.device.sprint.vendor],[f,E.str,I.device.sprint.model],[m,b]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[g,f,[m,y]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[g,[f,/_/g," "],[m,b]],[/(nexus\s9)/i],[f,[g,"HTC"],[m,y]],[/(nexus\s6p)/i],[f,[g,"Huawei"],[m,b]],[/(microsoft);\s(lumia[\s\w]+)/i],[g,f,[m,b]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[g,"Microsoft"],[m,v]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[g,"Microsoft"],[m,b]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[f,[g,"Motorola"],[m,b]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[g,"Motorola"],[m,y]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[g,k.trim],[f,k.trim],[m,_]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[g,"Samsung"],[m,_]],[/\(dtv[\);].+(aquos)/i],[f,[g,"Sharp"],[m,_]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[g,"Samsung"],f,[m,y]],[/smart-tv.+(samsung)/i],[g,[m,_],f],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[g,"Samsung"],f,[m,b]],[/sie-(\w+)*/i],[f,[g,"Siemens"],[m,b]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[g,"Nokia"],f,[m,b]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[g,"Acer"],[m,y]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[g,"LG"],f,[m,y]],[/(lg) netcast\.tv/i],[g,f,[m,_]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[g,"LG"],[m,b]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[g,"Lenovo"],[m,y]],[/linux;.+((jolla));/i],[g,f,[m,b]],[/((pebble))app\/[\d\.]+\s/i],[g,f,[m,x]],[/android.+;\s(glass)\s\d/i],[f,[g,"Google"],[m,x]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[g,"Xiaomi"],[m,b]],[/android.+a000(1)\s+build/i],[f,[g,"OnePlus"],[m,b]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[m,k.lowerize],g,f]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[w,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,w],[/rv\:([\w\.]+).*(gecko)/i],[w,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[w,E.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[w,E.str,I.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],w],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,w],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],w],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],w],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,w],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],w],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],w],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,w],[/(haiku)\s(\w+)/i],[p,w],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[w,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[w,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,w]]},A=function(n,t){if(!(this instanceof A))return new A(n,t).getResult();var o=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:i),r=t?k.extend(C,t):C;return this.getBrowser=function(){var e=E.rgx.apply(this,r.browser);return e.major=k.major(e.version),e},this.getCPU=function(){return E.rgx.apply(this,r.cpu)},this.getDevice=function(){return E.rgx.apply(this,r.device)},this.getEngine=function(){return E.rgx.apply(this,r.engine)},this.getOS=function(){return E.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};A.VERSION=r,A.BROWSER={NAME:p,MAJOR:d,VERSION:w},A.CPU={ARCHITECTURE:h},A.DEVICE={MODEL:f,VENDOR:g,TYPE:m,CONSOLE:v,MOBILE:b,SMARTTV:_,TABLET:y,WEARABLE:x,EMBEDDED:L},A.ENGINE={NAME:p,VERSION:w},A.OS={NAME:p,VERSION:w},typeof t!==s?(typeof n!==s&&n.exports&&(t=n.exports=A),t.UAParser=A):typeof define===u&&define.amd?define(function(){return A}):e.UAParser=A;var P=e.jQuery||e.Zepto;if(typeof P!==s){var S=new A;P.ua=S.getResult(),P.ua.get=function(){return S.getUA()},P.ua.set=function(e){S.setUA(e);var n=S.getResult();for(var t in n)P.ua[t]=n[t]}}}("object"==typeof window?window:this)},{}],3:[function(e,n,t){(function(n){var o,r,i,a,u,s,c,l,d,f,p,m,g;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,p=e("storage"),r=e("auth"),i=e("browser"),u=e("./url-resolver"),l=e("./registration"),d=l.signIn,f=l.signOut,m=e("./update"),s=e("./language").messages,t.device=a=o.fromPromise(p.read("device")).skipErrors().merge(d.merge(m).map(function(e){var n;return n=e.device})).filter(function(e){return e}).scan({},function(e,n){var t,o;for(t in n)o=n[t],e[t]=o;return e}).changes().merge(f.map(null)).toProperty(),a.onValue(function(e){return null!=e?(p.write("device",e),r.setCredentials(e.uuid,e.token)):p.delete("device")}),t.user=g=o.fromPromise(p.read("user")).skipErrors().merge(d.merge(m).map(function(e){var n;return n=e.user})).filter(function(e){return e}).merge(f.map(null)).toProperty(),g.onValue(function(e){return null!=e?p.write("user",e):p.delete("user")}),c=g.slidingWindow(2,2).filter(function(e){var n,t;return t=e[0],n=e[1],null!=(null!=t?t.is_premium:void 0)&&null!=(null!=n?n.is_premium:void 0)}).filter(function(e){var n,t;return t=e[0],n=e[1],t.is_premium!==n.is_premium}).map(function(e){var n,t;return t=e[0],n=e[1],n.is_premium}),c.flatMap(function(e){return o.combineAsArray(a.take(1),s.take(1),e)}).map(function(e){var n,t,o,r,i;return n=e[0],o=e[1],t=e[2],r=o.notifications.status_change,t?[r.upgraded_title,r.upgraded_msg,null]:(i=u("account/premium",{utm_source:"extension",utm_medium:"in_product",utm_campaign:"notification_premiumtofree_{countryCode}",utm_content:"automatic_popup"}),[r.downgraded_title,r.downgraded_msg,i])}).onValues(function(e,n,t){var o,r;return o={type:"basic",title:e,message:n},r={title:e,text:n,data:{url:t}},i.notify({chrome:{newsItem:o,data:{url:t}},firefox:r})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./language":38,"./registration":48,"./update":53,"./url-resolver":54,auth:7,browser:10,storage:16}],4:[function(e,n,t){(function(t){"use strict";function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.retry({source:function(){return u.fromPromise(c({url:w.get().apiURL+"/v2/"+e,responseType:"json",method:n,data:t,headers:{"x-rm-url":w.get().apiURLs[0]}})).flatMapError(function(e){return u.combineAsArray([e,d]).flatMap(function(e){var n=a(e,2),t=n[0],o=n[1];return g({error:t,stickyFrontingDomain:o}).flatMap(function(e){return u.once(new u.Error(e))})})})},retries:2,isRetryable:function(e){var n=e.error;return!!e.online&&(e.frontingDomain?f(e.frontingDomain):e.apiUrl&&w.setApiURL(e.apiUrl),!n||403!==n.status)},delay:function(){return 250}}).map(function(e){return e.payload})}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.fromPromise(p.read("device")).skipErrors().flatMapLatest(function(r){return o(e,n,i({},t,{auth_method:"device",auth_id:r.uuid,auth_secret:r.token}))})}var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=function(){function e(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,s=e("xhr"),c=s.request,l=e("fronting"),d=l.stickyFrontDomain,f=l.enableFullFronting,p=e("storage"),m=e("./connectivity"),g=m.connectivityCheck,w=e("./config");n.exports={apiRequest:o,apiRequestWithAuth:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":20,"./connectivity":22,fronting:13,storage:16,xhr:19}],5:[function(e,n,t){(function(e){var n;n="undefined"!=typeof window?window.Bacon:"undefined"!=typeof e?e.Bacon:null,n.Property.prototype.triggeredBy=function(e,n){return this.changes().merge(this.sampledBy(e,n))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,t){(function(t){var o,r,i,a,u,s,c=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("browser"),s=e("tab-info"),a=e("./config"),u=e("./language").messages,n.exports=r=s.filter(function(e){var n;return n=e.host,c.call(a.get().blockedSites,n)>=0&&(i.closePage(e.url),!0)}).map(function(e){return e.url}),o.combineAsArray(r,u).onValues(function(e,n){var t,o,r,a;return a=n.notifications.blocked_site.title,r=n.notifications.blocked_site.message.replace("{blockedURL}",e),t={type:"basic",title:a,message:r},o={title:a,text:r,data:{}},i.notify({chrome:{newsItem:t,data:{}},firefox:o})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":20,"./language":38,browser:10,"tab-info":17}],7:[function(e,n,t){"use strict";var o=(e("loglevel"),"no_data_in_plugin"),r="no_data_in_plugin",i="";t.setCredentials=function(e,n){o=e,r=n},t.setFeatureFlags=function(e){i=e},t.authHandler=function(e,n){if(!e.isProxy||!~e.realm.toLowerCase().indexOf("zenmate"))return n();var t=o;i&&(t+=";"+i);var a={authCredentials:{username:t,password:r}};return n(a)}},{loglevel:1}],8:[function(e,n,t){"use strict";var o=window,r=o.atob,i=o.btoa;n.exports={atob:r,btoa:i}},{}],9:[function(e,n,t){(function(n){var o,r,i,a,u=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,i=e("loglevel"),a=o.fromBinder(function(e){return chrome.management.onEnabled.addListener(e),chrome.management.onDisabled.addListener(e),chrome.proxy.settings.onChange.addListener(e)}).flatMapLatest(function(){return r()}),r=function(){return o.fromCallback(function(e){return chrome.proxy.settings.get({incognito:!1},e)})},t.proxyBlocked=r().merge(a).map(function(e){return"controllable_by_this_extension"!==(null!=e?e.levelOfControl:void 0)&&"controlled_by_this_extension"!==(null!=e?e.levelOfControl:void 0)}).toProperty(!1),t.proxyBlockedBy=t.proxyBlocked.flatMapLatest(function(e){return o.fromCallback(function(n){return e?chrome.management.getAll(function(e){var t,o;return t=function(){var n,t,r,i;for(i=[],n=0,t=e.length;n<t;n++)o=e[n],chrome.runtime.id!==o.id&&o.enabled&&u.call(o.permissions,"proxy")>=0&&i.push({id:o.id,name:o.name,icon:null!=(r=o.icons)?r[0].url:void 0});return i}(),n(t)}):n([])})}).toProperty()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{loglevel:1}],10:[function(e,n,t){var o,r,i,a,u,s,c,l,d,f,p,m,g,w,h,v,b,y,_,x,L=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};d=e("loglevel"),r=e("../api_request").apiRequest,u=e("./fronting").enableFronting,y=e("./storage"),c=e("../url-resolver"),i=e("./auth").authHandler,x=e("../util"),a=e("../config"),g=e("../pacengine"),o=e("ua-parser-js"),e("./page_api"),e("./ciuvo_messages"),_=new o(navigator.userAgent).getResult(),t.getName=function(){return _.browser.name},t.getInstallSource=function(e){var n,t;t=[{name:"website",pattern:"*://zenmate.com/*",host:"zenmate.com/"},{name:"chromestore",pattern:"*://chrome.google.com/webstore/detail/*/"+chrome.runtime.id+"*",host:"chrome.google.com/"},{name:"operastore",pattern:"*://addons.opera.com/*/extensions/details/zenmate-for-operatm/*",host:"addons.opera.com/"}];try{return chrome.tabs.query({url:t.map(function(e){return e.pattern})},function(n){var o,r,i,a,u,s,c;for(o=0,i=n.length;o<i;o++)for(s=n[o],c=x.getUTMSourcesFromURL(s.url),r=0,a=t.length;r<a;r++)if(u=t[r],s.url.indexOf(u.host)>-1)return e("url="+u.name+";"+c);return e("unknown")})}catch(t){return n=t,d.error(n),e("unknown")}},b=function(e){return c("account/signup",e)},f=function(e){return c("account/login",e)},t.openSignupPage=function(){return t.getInstallSource(function(e){var n,o;return L.call(e,";")>=0&&(o=e.split(";"),e=o[0].split("=")[1]),n={utm_medium:"in_product",utm_source:"extension_interface",utm_campaign:"login_"+e+"_{countryCode}",utm_content:"menu"},y.read("signup_shown").then(function(){return t.openPage(f(n))}).catch(function(){return y.write("signup_shown",!0),t.openPage(b(n))})})},t.openLogoutPage=function(){return t.openPage(c("account/logout"),!0)},t.openPage=p=function(e){return chrome.tabs.create({url:e,active:!0},function(e){return chrome.windows.update(e.windowId,{focused:!0})})},t.openPopup=m=function(e,n){return chrome.windows.create({type:"popup",url:e,width:1024,top:0,height:700},n)},t.closePage=function(e,n){return chrome.tabs.query({url:e},function(e){var t,o,r,i;if(null!=e){for(r=[],t=0,o=e.length;t<o;t++)i=e[t],i.id!==n&&r.push(chrome.tabs.remove(i.id));return r}})},t.closePopup=function(){return!1},t.getExtensionURL=s=function(e){return chrome.extension.getURL(e)},t.setIconAction=function(e){return"popup"===e?chrome.browserAction.setPopup({popup:"popup.html"}):chrome.browserAction.setPopup({popup:""})},"undefined"!=typeof chrome&&null!==chrome&&null!=(h=chrome.browserAction)&&h.onClicked.addListener(function(){return t.openSignupPage()}),w=function(e){var n;try{return!!(n=localStorage.getItem(e))&&JSON.parse(n)}catch(e){return!1}},"undefined"!=typeof chrome&&null!==chrome&&null!=(v=chrome.runtime)&&v.onInstalled.addListener(function(e){if("update"===e.reason)return r("et/upgrade","GET",{previous_version:e.previousVersion}).onValue()}),t.setup=function(){return chrome.runtime.onUpdateAvailable.addListener(function(){return chrome.runtime.reload()}),u(),chrome.runtime.setUninstallURL(c("account/uninstall",{utm_source:"extension",utm_medium:"in_product",utm_campaign:"uninstall",utm_content:"menu"})),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){return{cancel:!0}},{urls:["*://www.google.com/searchdomaincheck*"]},["blocking"]),chrome.proxy.onProxyError.addListener(function(e){return d.warn("Proxy error",e)}),y.read("device").then(function(e){return!(!e.uuid||!e.token)}).catch(function(){return!1})},t.hasIncognitoAccess=function(e){return chrome.extension.isAllowedIncognitoAccess(function(n){return e(n)})},t.connect=function(e,n,t,o){var r,u,s,c;return r=g.getNodeDictFromLocations(n,a.get().alternativeNodes),u=g.exportPAC(e.country_code,r,t,o),s={value:{mode:"pac_script",pacScript:{data:u}},scope:"regular"},chrome.proxy.settings.set(s,function(e){}),"undefined"!=typeof chrome&&null!==chrome&&null!=(c=chrome.webRequest)?c.onAuthRequired.addListener(i,{urls:["<all_urls>"]},["asyncBlocking"]):void 0},t.disconnect=function(){var e;return chrome.proxy.settings.set({value:{mode:"direct"},scope:"regular"},function(e){}),"undefined"!=typeof chrome&&null!==chrome&&null!=(e=chrome.webRequest)?e.onAuthRequired.removeListener(i):void 0},l={signedout:{38:s("icons/standard-38.png"),19:s("icons/standard-19.png")},enabled:{38:s("icons/enabled-38.png"),19:s("icons/enabled-19.png")},disabled:{38:s("icons/disabled-38.png"),19:s("icons/disabled-19.png")}},t.setIconImage=function(e,n){var t;return t={path:l[e.toLowerCase()]},null!=n&&(t.tabId=n),chrome.browserAction.setIcon(t)},t.setIconTitle=function(e,n){var t;return t={title:"ZenMate"},null!=e&&(t.title=t.title+"\n"+e),chrome.browserAction.setTitle(t)},t.setIconBadge=function(e,n,t){return null==t&&(t="#008ace"),chrome.browserAction.setBadgeBackgroundColor({color:t}),chrome.browserAction.setBadgeText({text:e||"",tabId:n})},t.notify=function(e){var n,t;if(t=e.chrome.newsItem,n=e.chrome.data,t.iconUrl=s("images/notification_chrome@2x.png"),t.eventTime=Date.now(),t.isClickable=null!=(null!=n?n.url:void 0),chrome.notifications.create(JSON.stringify(e),t,function(e){}),null!=(null!=n?n.url:void 0))return chrome.notifications.onClicked.addListener(function(e){return p(n.url,!1)})},t.fullReset=function(){},t.getLocale=function(){return navigator.language.toString().toLowerCase().split("-")[0]||"en"},t.getVersion=function(){return chrome.runtime.getManifest().version},t.unblockProxySettings=function(){return null}},{"../api_request":4,"../config":20,"../pacengine":44,"../url-resolver":54,"../util":55,"./auth":7,"./ciuvo_messages":11,"./fronting":13,"./page_api":15,"./storage":16,loglevel:1,"ua-parser-js":2}],11:[function(e,n,t){var o,r,i,a,u,s=function(e,n){function t(){this.constructor=e}for(var o in n)c.call(n,o)&&(e[o]=n[o]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e},c={}.hasOwnProperty;r=e("../emitter"),u=e("loglevel"),i=e("../config"),a=function(e,n,t){var o;o=new ciuvoSDK.Whitelist(i.get().ciuvoSettings),o.isWhitelisted(n,function(){var n,t,o;t={file:"scripts/vendor/ciuvo-contentscript.min.js"},n=function(n){chrome.tabs.sendMessage(e,{action:"runCiuvo",settings:i.get().ciuvoSettings})};try{chrome.tabs.executeScript(e,t,n)}catch(e){o=e}},function(e){})},o=function(e){function n(){n.__super__.constructor.call(this),chrome.runtime.onMessage.addListener(function(e){return function(n,t){var o;if(o=t.tab.id,null!=n.action&&"pageLoaded"===n.action&&n.top&&a(o,n.url,t.tab),null!=n.action&&"disableSmartPrice"===n.action)return e.trigger("disableSmartPrice")}}(this))}return s(n,e),n}(r),n.exports=new o},{"../config":20,"../emitter":31,loglevel:1}],12:[function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),u=e("../config"),s=e("../emitter"),c=chrome,l=c.cookies,d="auth_website_session",f=function(e){function n(){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addListener(),e}return i(n,e),a(n,[{key:"getAuthCookie",value:function(){var e=this;return new Promise(function(n){return l.get({url:"https://"+u.get().authApiDomain,name:d},function(t){t&&e.triggerLogin(t.value),n(t)})})}},{key:"removeAuthCookie",value:function(){console.log("removeAuthCookie","https://"+u.get().authApiDomain),l.remove({url:"https://"+u.get().authApiDomain,name:d})}},{key:"triggerLogin",value:function(e){var n=JSON.parse(atob(e)),t={auth_method:"token",auth_id:n.id,auth_secret:n.token};this.trigger("login",t)}},{key:"addListener",value:function(){var e=this;l.onChanged.addListener(function(n){var t=n.cookie,o=n.removed,r=t.domain,i=t.name,a=t.path,s=t.value;r===u.get().authApiDomain&&i===d&&"/"===a&&(o?e.trigger("logout"):e.triggerLogin(s))})}}]),n}(s);n.exports=new f},{"../config":20,"../emitter":31}],13:[function(e,n,t){(function(t){"use strict";function o(e){return e.replace("https","*")+"/*"}function r(e){return new URL(e).hostname}function i(e){return"*://"+e+"/*"}function a(e){f.write("fronting_domain",e),p.setApiURL("https://"+e),p.setNewsServiceUrl("https://"+e),p.setAuthApiDomain(e)}function u(e,n){var t=n.filter(function(n){return!e[n.name.toLowerCase()]});return Object.keys(e).forEach(function(n){t.push({name:n,value:e[n]})}),t}function s(){var e=b.map(i);chrome.webRequest.onBeforeSendHeaders.addListener(function(e){if(e.tabId===-1){var n=e.requestHeaders.filter(function(e){return"x-rm-url"===e.name}).reduce(function(e,n){return n.value},null),t=p.get().apiFront;n===p.get().newsServiceUrls[0]&&(t=p.get().newsServiceFront),e.requestHeaders.push({name:"Host",value:t})}return{requestHeaders:e.requestHeaders}},{urls:e,types:["xmlhttprequest"],tabId:-1},["requestHeaders","blocking"])}function c(n){if(!E){E=!0,a(n);var t=L.map(i),r=p.get().websiteDomains.map(function(e){return i("*."+e)}),s=t.concat(r);s.push(o(p.get().geoRedirector)),s.push(i(p.get().authApiDomains[0])),s.push(i(p.get().websiteAssets)),chrome.webRequest.onBeforeRequest.addListener(function(e){if(e.tabId===-1)return{};var t=new URL(e.url),o=t.hostname;"main_frame"===e.type&&(y[e.tabId]=o),t.hostname=n;var r=""+t.toString();return"main_frame"!==e.type&&(r=""+r+x+o),{redirectUrl:r}},{urls:s,types:h},["blocking"]),chrome.webRequest.onHeadersReceived.addListener(function(e){if(!y[e.tabId])return{responseHeaders:e.responseHeaders};var n={"access-control-allow-origin":"null","access-control-allow-credentials":"true","access-control-allow-headers":"content-type, Accept-Language, Authorization, xng-global-user-id","access-control-allow-methods":"GET, POST, PUT, PATCH, DELETE, OPTIONS","cache-control":"no-cache"},t=u(n,e.responseHeaders);return{responseHeaders:t}},{urls:[i(n)],types:["xmlhttprequest"]},["blocking","responseHeaders"]),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){function t(t){var r=L.includes(t)?p.get().apiFront:p.get().websiteFront,i={host:r,"x-rm":"true","x-rm-host":t,"x-rm-front":n,"x-rm-main":o,"if-modified-since":"Thu, 01 Jan 1970 00:00:00 GMT"},a=u(i,e.requestHeaders);return{requestHeaders:a}}var o=y[e.tabId];if(!o)return{requestHeaders:e.requestHeaders};if(e.url.includes(x)){var r=void 0,i=e.url.match(/#x-rm-host=(.*)/i);if(i&&2===i.length&&(r=i[1]),r)return t(r)}return"main_frame"===e.type?t(o):v.includes(e.type)?t(p.get().websiteAssets):"xmlhttprequest"===e.type?t(L[0]):{requestHeaders:e.requestHeaders}},{urls:[i(n)],types:h},["requestHeaders","blocking"]),chrome.tabs.onUpdated.addListener(function(t,o){if(y[t]){var r=o&&o.status&&"loading"===o.status;if(r)return _.includes(t)||"Chrome"!==m.getName()?void chrome.tabs.executeScript(t,{runAt:"document_start",code:'\n      document.documentElement.dataset.rm = "true";\n      document.documentElement.dataset.rmHost = "'+y[t]+'";\n      document.documentElement.dataset.rmFront = "'+n+'";\n\n      ('+e("../../content/chrome/page_api")+")();\n    "
}):void m.openPopup(o.url,function(e){var n=e.tabs[0];chrome.tabs.remove(t),_.push(n.id),y[n.id]=y[t]})}})}}function l(){s(),k.onValue(function(e){w({stickyFrontingDomain:e}).onValue(function(e){var n=e.online,t=e.apiUrl,o=e.frontingDomain;n&&(o?c(o):t&&p.setApiURL(t))})})}var d="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,f=e("./storage"),p=e("../config"),m=e("./browser"),g=e("../connectivity"),w=g.connectivityCheck,h=["main_frame","xmlhttprequest","image","script","stylesheet","font","object","other","ping"],v=["image","script","stylesheet","font"],b=JSON.parse(atob(p.get().domainFronts)),y={},_=[],x="#x-rm-host=",L=p.get().apiURLs.map(r),k=d.fromPromise(f.read("fronting_domain")).mapError(function(){return b[Math.floor(Math.random()*b.length)]}).toProperty(),E=!1;n.exports={enableFronting:l,enableFullFronting:c,setFrontDomain:a,stickyFrontDomain:k}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../content/chrome/page_api":57,"../config":20,"../connectivity":22,"./browser":10,"./storage":16}],14:[function(e,n,t){var o,r,i,a=function(e,n){function t(){this.constructor=e}for(var o in n)u.call(n,o)&&(e[o]=n[o]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e},u={}.hasOwnProperty;o=e("../emitter"),i=e("loglevel"),r=function(e){function n(e){this.name=e,n.__super__.constructor.call(this),this.port=null,chrome.runtime.onConnect.addListener(function(e){return function(n){var t,o,r,i,a;if(n.name===e.name)return(null!=(t=e.port)&&null!=(o=t.sender)&&null!=(r=o.tab)?r.id:void 0)&&e.port.sender.tab.id!==(null!=n&&null!=(i=n.sender)&&null!=(a=i.tab)?a.id:void 0)&&chrome.tabs.remove(e.port.sender.tab.id),e.port=n,e.port.onMessage.addListener(function(n){return e.trigger(n.subject,n.payload)}),e.port.onDisconnect.addListener(function(e){})}}(this))}return a(n,e),n.prototype.send=function(e,n){var t,o;try{return null!=(o=this.port)?o.postMessage({subject:e,payload:n}):void 0}catch(e){return void(t=e)}},n}(o),n.exports=r},{"../emitter":31,loglevel:1}],15:[function(e,n,t){var o,r,i,a=function(e,n){function t(){this.constructor=e}for(var o in n)u.call(n,o)&&(e[o]=n[o]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e},u={}.hasOwnProperty;o=e("../emitter"),i=e("loglevel"),r=function(e){function n(){n.__super__.constructor.call(this),chrome.runtime.onMessage.addListener(function(e){return function(n,t){return null==n.payload&&(n.payload={}),n.payload._sender=t,e.trigger(n.subject,n.payload)}}(this))}return a(n,e),n.prototype.send=function(e,n,t){return chrome.tabs.sendMessage(n.tab.id,{subject:e,payload:t})},n}(o),n.exports=new r},{"../emitter":31,loglevel:1}],16:[function(e,n,t){"use strict";function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.read=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(t,o){return chrome.storage.local.get(e,function(r){r.hasOwnProperty(e)?t(r[e]):n?o(Error("Element "+e+" not found")):t()})})},t.write=function(e,n){return new Promise(function(t){var r=o({},e,n);return chrome.storage.local.set(r,t)})},t.delete=function(e){return new Promise(function(n){return chrome.storage.local.remove(e,n)})}},{}],17:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("../util"),i=o.fromBinder(function(e){chrome.tabs.query({active:!0},function(n){n&&n.length&&e(n[0])}),chrome.tabs.onActivated.addListener(function(n){chrome.tabs.get(n.tabId,e)}),chrome.tabs.onUpdated.addListener(function(n,t,o){o.active&&"complete"!==t.status&&o&&e(o)})}).diff(null,function(e,n){var t=n.url.includes("chrome-devtools://devtools");if(!(n&&e&&t))return n}).filter(function(e){return e}).map(function(e){return e.host=r.parseURL(e.url).host,e.favIconUrl=e.favIconUrl||"chrome://favicon/"+e.url,e}).toProperty();n.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":55}],18:[function(e,n,t){var o,r,i,a=function(e,n){function t(){this.constructor=e}for(var o in n)u.call(n,o)&&(e[o]=n[o]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e},u={}.hasOwnProperty;o=e("../emitter"),i=chrome.extension.getURL(""),r=function(e){function n(){n.__super__.constructor.call(this),this.active=!1,this.showMessage=!0,this.messages=null,chrome.runtime.onMessage.addListener(function(e){return function(n,t){if("getWidgetStatus"===n.subject&&chrome.tabs.sendMessage(t.tab.id,{subject:"widgetStatus",payload:{active:e.active,extUrl:i}}),"getWidgetMessage"===n.subject&&chrome.tabs.sendMessage(t.tab.id,{subject:"widgetMessage",payload:{show:e.showMessage,extUrl:i,messages:e.messages}}),"dismiss"!==n.subject&&"hideMessage"!==n.subject||e.trigger(n.subject,t),"getPremium"===n.subject)return e.trigger(n.subject,n.payload)}}(this))}return a(n,e),n.prototype.toggle=function(e){return e!==this.active&&chrome.tabs.query({},function(n){var t,o,r,a;for(r=[],t=0,o=n.length;t<o;t++)a=n[t],r.push(chrome.tabs.sendMessage(a.id,{subject:"widgetStatus",payload:{active:e,extUrl:i}}));return r}),this.active=e},n.prototype.toggleMessage=function(e,n){return this.messages=n,this.showMessage=e,chrome.tabs.query({},function(t){var o,r,a,u;for(a=[],o=0,r=t.length;o<r;o++)u=t[o],a.push(chrome.tabs.sendMessage(u.id,{subject:"widgetMessage",payload:{show:e,extUrl:i,messages:n}}));return a})},n}(o),n.exports=new r},{"../emitter":31}],19:[function(e,n,t){var o,r,i;o=e("ua-parser-js"),i=e("storage"),r=function(){return Promise.all([i.read("install_id",!1),i.read("install_source",!1),i.read("enabled",!1),i.read("default_location",!1),i.read("user",!1),i.read("device",!1)]).then(function(e){var n,t,r,i,a,u,s,c;return i=e[0],a=e[1],r=e[2],n=e[3],c=e[4],t=e[5],s=new o(navigator.userAgent).getResult(),{real_location:null!=c?c.country_code:void 0,uuid:null!=t?t.uuid:void 0,platform_name:"extension",client_name:s.browser.name,user_agent_string:s.ua,client_env:s.ua,isPremium:null!=c?c.is_premium:void 0,isVerified:null!=c?c.is_verified:void 0,isAnonymous:null!=c?c.is_anonymous:void 0,zm_connected:r,selected_location:n,sku:null!=c&&null!=(u=c.subscription)?u.sku:void 0,install_source:a,install_id:i,os_name:s.os.name,os_ver:s.os.version,client_ver:chrome.runtime.getManifest().version,app_ver:chrome.runtime.getManifest().version,locations_scope:"full",show_premium:!0}})},t.request=function(e){return r().then(function(n){var t,o,r,i;o={};for(t in n)i=n[t],null!=i&&(o[t]=i);r=e.data;for(t in r)i=r[t],o[t]=i;return new Promise(function(n,t){var r,i,a,u,s,c,l,d,f;d=new XMLHttpRequest,s=e.method||"GET",r="","GET"===s.toUpperCase()&&e.data&&(i=function(){var e;e=[];for(u in o)f=o[u],e.push(encodeURIComponent(u)+"="+encodeURIComponent(f));return e}(),r="?"+i.join("&")),d.open(s,e.url+r),d.responseType=e.responseType||"",c=e.headers;for(u in c)f=c[u],d.setRequestHeader(u,f);if(a=null,("POST"===(l=s.toUpperCase())||"PUT"===l)&&e.data){a=new FormData;for(u in o)f=o[u],a.append(u,f)}return d.onload=function(){var e;return d.status>=200&&d.status<300?(d.payload=d.response,n(d)):(e=Error("Error"),e.type="onload",e.payload=d.response,e.status=d.status,t(e))},d.onerror=function(){var e;return e=Error("Network Error"),e.type="onerror",e.payload=d.response,e.status=d.status,t(e)},d.ontimeout=function(){var e;return e=Error("Request timeout"),e.type="ontimeout",t(e)},d.send(a)})})}},{storage:16,"ua-parser-js":2}],20:[function(e,n,t){"use strict";function o(e){e&&(s.logLevel=e,u.setLevel(s.logLevel),console.info("logLevel:",s.logLevel))}function r(e){e&&(s.apiURL=e,console.info("api:",s.apiURL))}function i(e){e&&(s.newsServiceUrl=e,console.info("newsServiceUrl:",s.newsServiceUrl))}function a(e){e&&(s.authApiDomain=e,console.info("authApiDomain:",s.authApiDomain))}var u=e("loglevel"),s={logLevel:"silent",apiURL:"https://api.zcdn.de",apiURLs:["https://api.zcdn.de","https://api.zenguard.biz"],apiFront:"d1mvkhn4psrs16.cloudfront.net",geoRedirector:"https://geo.zenmate.com",websiteFront:"d21e7xkr9vlo60.cloudfront.net",websiteAssets:"du3rt6yhb1dqh.cloudfront.net",criticalWebsiteDomains:["zenmate.com"],websiteDomains:["zenmate.com","zenmate.ae","zenmate.ma","zenmate.dk","zenmate.at","zenmate.ch","zenmate.de","zenmate.li","zenmate.ca","zenmate.co.uk","zenmate.ie","zenmate.co.nz","zenmate.com.ar","zenmate.cl","zenmate.co","zenmate.es","zenmate.mx","zenmate.com.pa","zenmate.com.pe","zenmate.com.ve","zenmate.fi","zenmate.fr","zenmate.co.il","zenmate.in","zenmate.hu","zenmate.co.id","zenmate.is","zenmate.it","zenmate.jp","zenmate.kr","zenmate.lu","zenmate.lt","zenmate.lv","zenmate.my","zenmate.be","zenmate.nl","zenmate.pl","zenmate.com.br","zenmate.pt","zenmate.ro","zenmate.com.ru","zenmate.se","zenmate.sg","zenmate.com.ph","zenmate.com.tr","zenmate.pk","zenmate.vn","zenmate.hk"],domainFronts:"WyIxMDEubGl2ZXJlLmNvLmtyIiwiYTAuYXdzc3RhdGljLmNvbSIsImFkY3QuY2EiLCJhaXJuZXd6ZWFsYW5kLmNvLm56IiwiYWlydmlzdGFyYS5jb20iLCJhbGRpLmRlIiwiYW1pcmVudHN0YWJpbGl6ZWQuY29tIiwiYW5zd2VyYmFja21hY2hpbmUub3JnIiwiYXBpLnZvZC5nbG9ib3NhdC50diIsImFzaWF3ZWJkaXJlY3QuY29tIiwiYXdzLWJsb2cuaW8iLCJiaXotam91cm5hbC5qcCIsImJvbWJvcmF0ZWNoLmNvbS5hdSIsImNkbi1pbWFnZXMubWFpbGNoaW1wLmNvbSIsImNkbi5kZXYuYW9wLmFjZXIuY29tIiwiY2RuLmVyaW5jYWxsLmNvbSIsImNmLmRyb3Bib3hwYXltZW50cy5jb20iLCJjaHJvbmljbGUuY29tIiwiY2xhc2hvZmNsYW5zLmNvbSIsImNsaWVudHVwZGF0ZXMuZHJvcGJveHN0YXRpYy5jb20iLCJjb25uZWN0aXZpdHkuYW1hem9ud29ya3NwYWNlcy5jb20iLCJjcm9zc2V0Lm9ud2FyZC5jby5qcCIsImQwLmF3c3N0YXRpYy5jb20iLCJkZXJhdXRvcGlsb3QuY29tIiwiZGV2YnVpbGRzLnViZXIuY29tIiwiZGV2ZWxvcGVyLnNvbnkuY29tIiwiZGV2aWFudGFydC5jb20iLCJkZXZyZWwuanAiLCJkb3dubG9hZC5lcGljZ2FtZXMuY29tIiwiZXBzb24uY29tIiwiZmFuY3JlZC5vcmciLCJmaWZhY29ubmVjdC5vcmciLCJmaXRiaXQuY29tIiwiaGJyLm9yZyIsImhic3AuaGFydmFyZC5lZHUiLCJoc2N1Lm5ldCIsImh1Yi1vbG9neS5vcmciLCJpZmxpeC5jb20iLCJpbWFnZXMtbmEuc3NsLWltYWdlcy1hbWF6b24uY29tIiwiaW5mb2pvYnMubmV0IiwianRjbGFyay5jYSIsImtpY2tzdGFydGVyLmNvbSIsImxpdGUtcmEuY29tIiwibWVyY2FyaS5jb20iLCJtaW5lY3JhZnQubmV0IiwibWl0bXByb3h5Lm9yZyIsIm14dG9vbGJveC5jb20iLCJvbGFjYWJzLmNvbSIsIm9wZW5yZXB1dGF0aW9uLm5ldCIsInF1aXp1cC5jb20iLCJyYXpvcnNxbC5jb20iLCJyb3Zlci5jb20iLCJzaGFyZS5vcmlnaW4uOWNkbi5uZXQiLCJzaWduYWwuaXMiLCJzbWFsbHBkZi5jb20iLCJzdGF0aWMudW5lLmVkdS5hdSIsInN5c2FkbWluY2FzdHMuY29tIiwidGhhaXNtaWxlYWlyLmNvbSIsInVuZm9sZGluZ3dvcmQub3JnIiwidmVyc2FuZC1zdGF0dXMuZGUiLCJ3ZGMuY29tIiwid2ltZHUuY29tLnRyIiwid2ltZHUuZGUiLCJ3b3dhaXIuaXMiLCJ3d3cuYXB0bHkuaW5mbyIsInd3dy5jbWNtLmNvbSIsInd3dy5ob3RzcG90c2hpZWxkLmNvbSIsInd3dy5pa3VzYWxpYy5jb20iLCJ3d3cubHBnYS5vci5qcCIsInd3dy5wYXlwYWwtZHluYW1pYy5jb20iLCJ3d3cudGlyZWRwaXhlbC5jb20iLCJ3d3cudW5yb2xsLm1lIiwieWNvbWJpbmF0b3IuY29tIl0=",authApiDomain:"auth.zenmate.com",authApiDomains:["auth.zenmate.com"],newsServiceUrl:"https://crm.zenguard.biz",newsServiceUrls:["https://crm.zenguard.biz"],newsServiceFront:"d3h6bpau3gi7cm.cloudfront.net",connectionCheckDomains:[{url:"http://www.google.com.sg/gen_204",code:204},{url:"http://g.cn/generate_204",code:204},{url:"http://www.thinkdifferent.us",code:200},{url:"http://www.airport.us",code:200},{url:"http://detectportal.firefox.com/success.txt",code:200},{url:"http://captive.apple.com",code:200}],localDomains:["zenguard.biz","zcdn.de","zeus.pm","local","ip","fritz.box","kabel.box","invalid","intra","intranet","test","example","localhost","onion","i2p","lvh.me","vcap.me","127.0.0.1.xip.io","localtest.me","about:addons","about:newtab","about:preferences","about:config"],blackList:{"jid1-4P0kohSJxU1qGg@jetpack":"hola"},alternativeNodes:[],nodeOverrides:[],ruleOverrides:[{domains:["facebook.com"],hosts:["facebook.net","fbcdn.com","fbcdn.net","fbstatic-a.akamaihd.net","fbcdn-dragon-a.akamaihd.net"]}],blockedSites:["appnord.xyz"],ciuvoSettings:{base_url:"https://api.ciuvo.com/api/",tag:"z3Nnno43",campaign:"chrome"}};o("silent"),"undefined"!=typeof window&&(window.config=s),n.exports={get:function(){return s},setLogLevel:o,setApiURL:r,setNewsServiceUrl:i,setAuthApiDomain:a}},{loglevel:1}],21:[function(e,n,t){(function(t){var o,r,i,a,u,s,c,l,d,f,p,m,g,w;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("browser"),l=e("./logged-in"),u=e("./enabled"),p=e("./rules"),m=p.rules,g=p.rulesEnabled,f=e("blocked").proxyBlocked,s=e("./locations"),a=e("./locations/default"),c=e("loglevel"),d=e("./page_excludes"),w=e("./util").shuffle,n.exports=i=o.combineAsArray(l.and(f.not()).skipDuplicates(),u,a,s,m,g,d).onValues(function(e,n,t,o,i,a,u){var s;return e?(s=a&&i.length>0,null!=t.nodes&&w(t.nodes),s&&!n&&(t={country_code:"DEFAULT"}),s||(i=[]),n||s?r.connect(t,o,i,u):r.disconnect()):r.disconnect()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./enabled":32,"./locations":42,"./locations/default":40,"./logged-in":43,"./page_excludes":45,"./rules":49,"./util":55,blocked:9,browser:10,loglevel:1}],22:[function(e,n,t){(function(n){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("xhr"),i=r.request,a=e("./util"),u=a.shuffle,s=a.chunk,c=e("./config"),l=e("base64"),d=l.atob,f=1e4,p=JSON.parse(d(c.get().domainFronts));t.checkConnection=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments[3];return o.fromPromise(i({url:e,method:t,headers:r})).map(function(e){return e.status===n}).flatMapError(function(e){return e.status===n?o.once(!0):o.once(!1)}).merge(o.later(f,!1)).first()},t.checkPing=function(e){return t.checkConnection(e+"/ping",599,"HEAD",{"x-rm-url":c.get().apiURLs[0]})},t.websiteConnectionCheck=function(){return o.fromArray(c.get().criticalWebsiteDomains).flatMap(function(e){return t.checkConnection("https://"+e+"/robots.txt",200)}).reduce(!0,function(e,n){return e&&n})},t.apiConnectionCheck=function(){return o.fromArray(c.get().apiURLs).flatMap(function(e){return t.checkPing(e).map(function(n){return n?e:null})}).reduce(null,function(e,n){return e||n})},t.apiFrontingCheck=function(e){var n=s(u(p),3),r=!0;return t.checkPing("https://"+e).flatMap(function(i){return i?o.once(e):o.fromArray(n).flatMapConcat(function(e){return o.fromArray(e).filter(function(){return r}).flatMap(function(e){return t.checkPing("https://"+e).map(function(n){return n?(r=!1,e):null})})}).reduce(null,function(e,n){return e||n})})},t.onlineCheck=function(){return o.fromArray(c.get().connectionCheckDomains).flatMap(function(e){return t.checkConnection(e.url,e.code)}).filter(function(e){return e}).mapEnd(!1).first()},t.connectivityCheck=function(e){var n=e.stickyFrontingDomain,r=e.error;return t.onlineCheck().flatMap(function(e){return e?o.combineTemplate({apiUrl:t.apiConnectionCheck(),websiteWorks:t.websiteConnectionCheck()}).flatMap(function(o){var i=o.apiUrl,a=o.websiteWorks;return i&&a?{apiUrl:i,websiteWorks:a,online:e,error:r}:t.apiFrontingCheck(n).map(function(n){return{frontingDomain:n,apiUrl:i,websiteWorks:a,online:e,error:r}})}):{online:e,error:r}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":20,"./util":55,base64:8,xhr:19}],23:[function(e,n,t){(function(t){"use strict";function o(e,n){return Math.floor((e-n)/1e3/60/60/24)}function r(e){var n=e.user,t=e.device,r=e.language,a=e.defaultLocation,l=e.reason,f=new Date,p=i.getName(),m=void 0,g=void 0,w=void 0,h=void 0,v=void 0,b=void 0,y=-1,_=-1,x=-1;return n&&(f=d(n.server_time),m=n.id,g=n.country_code,w=n.is_b2b?"b2b":n.is_premium?"premium":"free",v=n.actual_country,h=n.subscription_country,n.subscription&&n.subscription.purchased_at&&(_=o(f,d(n.subscription.purchased_at))),n.subscription&&n.subscription.expires_at&&(x=o(d(n.subscription.expires_at),f))),t&&(y=o(f,d(t.created_at))),p&&(p=p.toLowerCase()),a&&(b=a.country_code),s.fromPromise(u({url:c.get().newsServiceUrl+"/crm",responseType:"json",data:{zenmate_user_id:m,locale:r,country_code:g,platform:p,version:i.getVersion(),account_type:w,reason:l,days_since_install:y,days_since_premium:_,days_to_recur:x,subscription_country:h,current_connect_country:b,actual_country:v},headers:{"x-rm-url":c.get().newsServiceUrls[0]}})).skipErrors().map(function(e){return e.payload})}var i=e("browser"),a=e("xhr"),u=a.request,s="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,c=e("../config"),l=e("../util"),d=l.parseDate;n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../config":20,"../util":55,browser:10,xhr:19}],24:[function(e,n,t){"use strict";n.exports={login:"login",timer:"timer"}},{}],25:[function(e,n,t){(function(t){"use strict";var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("../account"),a=i.user,u=i.device,s=e("../locations/default"),c=e("../language"),l=c.language,d=e("./api"),f=e("../registration"),p=f.signIn,m=e("./constants");n.exports=r.later(2e3).merge(r.interval(54e5,m.timer)).merge(p.map(function(){return m.login})).flatMapLatest(function(e){return r.combineTemplate({user:a,device:u,language:l,defaultLocation:s}).map(function(n){var t=o({},n,{reason:e});return e=null,t})}).debounceImmediate(2e3).flatMapLatest(d)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../account":3,"../language":38,"../locations/default":40,"../registration":48,"./api":23,"./constants":24}],26:[function(e,n,t){(function(t){var o,r,i,a,u,s,c,l,d,f=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,d=e("storage"),r=e("../index"),u=e("../../popup").popup,l=e("../../trial_end_promo").showTrialEndNews,s=o.fromEvent(u,"request:popupOpen"),i=r.map(function(e){return null!=e?e.news:void 0}).toProperty(null),a=o.mergeAll(l,i.filter(function(e){return e})).toProperty(null),c=o.fromPromise(d.read("previous_news")).mapError(function(){return[]}).flatMapLatest(function(e){return o.fromEvent(u,"request:popupOpen").flatMapLatest(a.take(1)).scan(e,function(e,n){var t;return!n||(t=n.id,f.call(e,t)>=0)||e.push(n.id),e})}).toProperty(),c.onValue(function(e){return d.write("previous_news",e)}),n.exports=a.combine(c,function(e,n){var t;return!e||(t=e.id,f.call(n,t)>=0)?null!=e&&(e.isNew=!1):e.isNew=!0,e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../popup":46,"../../trial_end_promo":52,"../index":25,storage:16}],27:[function(e,n,t){(function(t){"use strict";function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("storage"),a=e("browser"),u=e("../index"),s=u.map(function(e){var n=e.notification;return n}).flatMapLatest(function(e){return r.combineAsArray(e,r.fromPromise(i.read("notifications")).mapError([]))}).toProperty();s.onValues(function(e,n){if(e&&n.indexOf(e.id)===-1){var t=e.id,r=e.title,u=e.text,s=e.url,c={type:"basic",title:r,message:u},l={title:r,text:u,data:{url:s}};return a.notify({chrome:{newsItem:c,data:{url:s}},firefox:l}),i.write("notifications",[].concat(o(n),[t]))}}),n.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../index":25,browser:10,storage:16}],28:[function(e,n,t){(function(t){var o,r,i,a,u,s,c=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,s=e("storage"),r=e("../index"),u=e("../../popup").popup,a=r.filter(function(e){return null!=e?e.popUp:void 0}).map(function(e){return e.popUp}).toProperty(null),i=o.fromPromise(s.read("dismissed_crm_popups")).mapError(function(){return[]}).flatMapLatest(function(e){return o.fromEvent(u,"request:dismissCRMPopUp").map(function(n){return[n].concat(e)}).merge(o.once(e))}),i.onValue(function(e){return s.write("dismissed_crm_popups",e)}),n.exports=a.combine(i,function(e,n){var t;return t=null!=e?e.id:void 0,c.call(n,t)>=0?null:e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../popup":46,"../index":25,storage:16}],29:[function(e,n,t){(function(t){var o,r,i,a,u,s,c,l,d,f,p=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,l=e("storage"),r=e("browser"),i=e("../index"),u=e("../../popup").popup,c=e("../../trial_end_promo").showTrialEndTab,s=o.fromEvent(u,"request:popupOpen"),a=i.map(function(e){return null!=e?e.tabSpawn:void 0}).toProperty(null),f=c.toProperty(null),d=o.combineAsArray(f,a),n.exports=d.flatMapLatest(function(e){return o.combineAsArray(o.fromPromise(l.read("previous_tab_spawns")).mapError([]),e).flatMapLatest(function(e){var n,t,i,a,u,c;for(i=e[0],c=e[1],n=0,t=c.length;n<t;n++)if(u=c[n],u&&(a=u.id,!(p.call(i,a)>=0)))return o.once(u).merge(s.take(1).doAction(function(){return l.write("previous_tab_spawns",i.concat(u.id)),r.openPage(null!=u?u.url:void 0)}).map(null));return null}).toProperty()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../popup":46,"../../trial_end_promo":52,"../index":25,browser:10,storage:16}],30:[function(e,n,t){(function(e){}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":20,"./popup":46,browser:10,loglevel:1,storage:16}],31:[function(e,n,t){var o;o=function(){function e(){this.listeners={}}return e.prototype.off=function(e,n){var t;return this.listeners[e]=null!=(t=this.listeners[e])?t.filter(function(e){return e!==n}):void 0},e.prototype.on=function(e,n){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n)},e.prototype.trigger=function(e,n){var t,o,r,i,a;if(this.listeners[e]){for(i=this.listeners[e],a=[],t=0,o=i.length;t<o;t++)r=i[t],a.push(r(n));return a}},e}(),n.exports=o},{}],32:[function(e,n,t){(function(t){var o,r,i,a,u,s;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,s=e("storage"),u=e("./popup").popup,i=e("./logged-in"),a=e("page_api"),n.exports=r=o.fromPromise(s.read("enabled")).mapError(function(){return!0}).merge(o.fromEvent(a,"toggle")).merge(o.fromEvent(u,"request:toggleProxy")).merge(i.skip(1).changes().map(function(){return!0})).skipDuplicates().toProperty(),r.onValue(function(e){return e===!0?s.write("enabled_start",Date.now()):s.read("enabled_start",!1).then(function(e){if(e)return s.write("enabled_for",(Date.now()-e)/1e3),s.delete("enabled_start")}),s.write("enabled",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./logged-in":43,"./popup":46,page_api:15,storage:16}],33:[function(e,n,t){(function(t){var o,r,i,a,u,s,c,l,d;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,c=e("storage"),s=e("./popup").popup,r=e("auth"),d=e("./account").user,a={malwareBlocking:"m",trackingProtection:"t"},u=o.fromEvent(s,"request:toggleMalware"),l=o.fromEvent(s,"request:toggleTracking"),n.exports=i=o.fromPromise(c.read("features")).mapError(function(){return{}}).flatMap(function(e){return o.combineTemplate({malwareBlocking:u.startWith(e.malwareBlocking||!1),trackingProtection:l.startWith(e.trackingProtection||!1)}).combine(d,function(e,n){return(null!=n?n.is_premium:void 0)?e:{}})}),i.onValue(function(e){var n,t,o;n="";for(t in e)o=e[t],o&&(n+=a[t]);return r.setFeatureFlags(n),c.write("features",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":46,auth:7,storage:16}],34:[function(e,n,t){(function(n){var o,r,i,a,u,s,c,l,d,f,p,m,g,w,h;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("browser"),m=e("tab-info"),w=e("./tab_state").tabState,s=e("./logged-in"),u=e("./enabled"),a=e("./locations/current"),p=e("./rules").rulesEnabled,f=e("blocked").proxyBlocked,c=e("./language").messages,h=e("./account").user,d=e("./promo"),l=e("./crm/items/news"),g=e("./crm/items/tab_spawns"),i=e("./crm/items/popup"),t.iconImage=o.combineAsArray(s,u.and(f.not()),w,p).onValues(function(e,n,t,o){return o&&t.isRuleActive&&t.isDirect?r.setIconImage("disabled"):e?n||o&&t.isRuleActive?r.setIconImage("enabled"):r.setIconImage("disabled"):r.setIconImage("signedOut")}),t.iconTitle=o.combineAsArray(s,u.and(f.not()),m,w,a,p,c).onValues(function(e,n,t,o,i,a,u){return a&&o.isRuleActive?r.setIconTitle(u.icon_hover.connected.replace("{host}",t.host).replace("{country}",i.country_name)):a&&o.isRuleActive&&o.isDirect?r.setIconTitle(u.icon_hover.disabled_smart):e?n?o.isLocal?r.setIconTitle(u.icon_hover.local):r.setIconTitle(u.icon_hover.connected.replace("{host}",t.host).replace("{country}",i.country_name)):r.setIconTitle(u.icon_hover.disabled):r.setIconTitle(u.icon_hover.signed_out)}),t.iconBadge=o.combineAsArray(m,w,a,p,h,d,l,g,i).onValues(function(e,n,t,o,i,a,u,s,c){if(o&&n.isRuleActive?r.setIconBadge(t.country_code.toLowerCase(),e.id):r.setIconBadge("",e.id),o&&n.isRuleActive&&n.isDirect&&r.setIconBadge("off",e.id),a&&a.badge&&r.setIconBadge(a.badge,e.id,a.color),u&&u.isNew&&u.showBadge||s||c)return r.setIconBadge("1",e.id,"#CC3333")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./crm/items/news":26,"./crm/items/popup":28,"./crm/items/tab_spawns":29,"./enabled":32,"./language":38,"./locations/current":39,"./logged-in":43,"./promo":47,"./rules":49,"./tab_state":51,blocked:9,browser:10,"tab-info":17}],35:[function(e,n,t){(function(n){var t,o,r,i,a,u,s,c,l,d,f,p,m,g,w,h,v,b,y,_,x,L,k,E,I,C,A,P,S;e("./bacon.ext"),r=e("./config"),t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,e("./debug_overrides"),e("./install_source"),e("./logged-in"),e("./registration"),e("./crm/items/notifications"),e("./crm/items/tab_spawns"),e("./icon_state"),e("./connect"),e("./widget"),e("./blocked_sites"),o=e("browser"),m=e("./language").language,A=e("tab-info"),P=e("./tab_state").tabState,v=e("./popup").popup,l=e("./enabled"),h=e("page_api"),x=e("./account"),S=x.user,c=x.device,b=e("./promo"),g=e("./locations"),s=e("./locations/default"),a=e("./locations/current"),d=e("./locations/favorite"),w=e("./crm/items/news"),i=e("./crm/items/popup"),f=e("./features"),L=e("./rules"),E=L.rules,I=L.rulesEnabled,p=e("./url-resolver"),k=e("blocked"),y=k.proxyBlocked,_=k.proxyBlockedBy,C=e("./smart_price"),u=t.combineTemplate({user:S,device:c,promo:b,news:w,crmPopUp:i,language:m,features:f,tabInfo:A,tabState:P,locations:g,currentLocation:a,defaultLocation:s,favoriteLocations:d,enabled:l,rules:E,rulesEnabled:I,proxyBlocked:y,proxyBlockedBy:_,smartPrice:C}),u.onValue(function(e){return window.popupData=e}),u.triggeredBy(t.fromEvent(v,"request:data")).onValue(function(e){return v.send("response:data",e)}),t.fromEvent(h,"request:getData").flatMapLatest(function(e){return t.combineAsArray(e,S,c).take(1)}).onValues(function(e,n,t){return h.send("response:getData",e._sender,{timestamp:e.timestamp,user:n,device:t})}),t.fromEventTarget(v,"request:openPage").map(function(e){return p(e.url,e.params)}).onValue(o.openPage),t.fromEventTarget(v,"request:unblockProxySettings").onValue(function(){return o.unblockProxySettings()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./bacon.ext":5,"./blocked_sites":6,"./config":20,"./connect":21,"./crm/items/news":26,"./crm/items/notifications":27,"./crm/items/popup":28,"./crm/items/tab_spawns":29,"./debug_overrides":30,"./enabled":32,"./features":33,"./icon_state":34,"./install_source":37,"./language":38,"./locations":42,"./locations/current":39,"./locations/default":40,"./locations/favorite":41,"./logged-in":43,"./popup":46,"./promo":47,"./registration":48,"./rules":49,"./smart_price":50,"./tab_state":51,"./url-resolver":54,"./widget":56,blocked:9,browser:10,page_api:15,"tab-info":17}],36:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("storage"),i=e("./util"),a=e("./api_request"),u=a.apiRequest,s=o.fromPromise(r.read("install_id")).flatMapError(function(){var e=i.generateInstallId();return u("et/install/download","GET",{install_id:e}).map(e)}).toProperty();s.onValue(function(e){return r.write("install_id",e)}),n.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./util":55,storage:16}],37:[function(e,n,t){(function(t){var o,r,i,a,u,s;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,u=e("storage"),r=e("browser"),s=e("./util"),a=e("loglevel"),n.exports=i=o.fromPromise(u.read("install_source")).flatMapError(function(e){return o.fromCallback(function(e){return r.getInstallSource(e)})}).toProperty(),i.onValue(function(e){return u.write("install_source",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":55,browser:10,loglevel:1,storage:16}],38:[function(e,n,t){(function(o){var r,i,a,u,s,c;r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,i=e("browser"),c=e("storage"),s=e("./popup").popup,u="undefined"!=typeof window?window.locales:"undefined"!=typeof o?o.locales:null,t.language=a=r.fromPromise(c.read("language")).mapError(function(){return i.getLocale()}).merge(r.fromEvent(s,"request:changeLanguage")).skipDuplicates().toProperty(),n.exports.messages=a.map(function(e){return u.getLocalization(e).messages}),a.onValue(function(e){return c.write("language",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./popup":46,browser:10,storage:16}],39:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("../tab_state"),i=r.tabState,a=e("../rules"),u=a.rulesEnabled,s=e("./index"),c=e("./default"),l=o.combineTemplate({tabState:i,rulesEnabled:u,defaultLocation:c,locations:s}).map(function(e){var n=e.tabState,t=e.rulesEnabled,o=e.defaultLocation,r=e.locations;return t&&n.isRuleActive?n.isDirect?{country_code:"OFF",location:"ZenMate Off"}:r.find(function(e){return e.country_code===n.customCountry})||o:o});n.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../rules":49,"../tab_state":51,"./default":40,"./index":42}],40:[function(e,n,t){(function(t){"use strict";function o(e,n){return e.nodes&&e.nodes.length&&(!e.premium_only||n.is_premium)}var r=function(){function e(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,a=e("storage"),u=e("../popup"),s=u.popup,c=e("../account"),l=c.user,d=e("./index"),f=e("./favorite"),p=i.fromPromise(a.read("default_location")).mapError(function(){return"not_a_cc"}).merge(i.fromEvent(s,"request:changeLocation")).skipDuplicates().combine(i.combineAsArray(d,f,l),function(e,n){
var t=r(n,3),i=t[0],a=t[1],u=t[2];if(!i)return null;var s=i.find(function(n){return n.country_code===e&&o(n,u)});return s||(s=i.find(function(e){return o(e,u)})),a.includes(s.country_code)?s.isFavorite=!0:delete s.isFavorite,s}).filter(function(e){return e}).toProperty();p.onValue(function(e){a.write("default_location",e.country_code)}),n.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../account":3,"../popup":46,"./favorite":41,"./index":42,storage:16}],41:[function(e,n,t){(function(t){"use strict";function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e){return function(n){return[].concat(o(n),o(e))}}function i(e){return function(n){return n.includes(e)?[].concat(o(n)):[].concat(o(n),[e])}}function a(e){return function(n){return n.filter(function(n){return n!==e})}}var u="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,s=e("storage"),c=e("../popup"),l=c.popup,d=u.fromPromise(s.read("favorite_locations")).mapError(function(){return[]}),f=u.fromEvent(l,"request:addFavoriteLocation"),p=u.fromEvent(l,"request:removeFavoriteLocation"),m=u.when([d],r,[f],i,[p],a).scan([],function(e,n){return n(e)});m.onValue(function(e){s.write("favorite_locations",e)}),n.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../popup":46,storage:16}],42:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("storage"),i=e("../registration"),a=i.signIn,u=i.signOut,s=e("../popup"),c=s.popup,l=e("../update"),d=o.fromPromise(r.read("custom_locations")).mapError(function(){return[]}).concat(o.fromEvent(c,"request:addCustomLocation").map(function(e){return[e]})).filter(function(e){return e}).scan([],".concat");d.onValue(function(e){return r.write("custom_locations",e)});var f=o.fromPromise(r.read("default_locations")).skipErrors().merge(a.merge(l).map(function(e){return e.locations})).filter(function(e){return e&&e.length}).merge(u.map(function(){return[]})).toProperty();f.onValue(function(e){return e?r.write("default_locations",e):r.delete("default_locations")}),n.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../popup":46,"../registration":48,"../update":53,storage:16}],43:[function(e,n,t){(function(t){"use strict";var o=e("browser"),r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("./registration"),a=i.signIn,u=i.signOut,s=r.fromPromise(o.setup());s.onValue(function(e){return!e&&o.openSignupPage()});var c=s.merge(a.map(function(){return!0}).mapError(function(){return!1})).merge(u.map(function(){return!1})).skipDuplicates().toProperty();c.onValue(function(e){return o.setIconAction(e?"popup":"")}),n.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./registration":48,browser:10}],44:[function(e,n,t){var o,r,i,a,u,s,c,l,d={}.hasOwnProperty;o=e("./config"),l=e("./util"),a=e("loglevel"),r={localDomains:o.get().localDomains,nodeOverrides:o.get().nodeOverrides,IPv4NotationRE:/^\d+\.\d+\.\d+\.\d+$/g,localIPsRE:/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)/},i={data:r,nodeLookup:function(e,n){return e[n]||!1},compareHosts:function(e,n){var t,o,r;for(o=0,r=e.length;o<r;o++)if(t=e[o],this.matchWildcardDomain(n,t))return t},compareURLs:function(e,n){var t,o,r;for(t=0,o=e.length;t<o;t++)if(r=e[t],r.test(n))return r},dnsDomainIs:function(e,n){return e.length>=n.length&&e.substring(e.length-n.length)===n},matchWildcardDomain:function(e,n){var t,o,r;return t=e===n,r=e.slice(-n.length)===n,o="."===e[e.lastIndexOf(n)-1],t||r&&o},matchNodeOverride:function(e,n){var t,o,r;return r=function(){var o,r,i,a;for(i=this.data.nodeOverrides,a=[],o=0,r=i.length;o<r;o++)t=i[o],t.target_cc===n&&this.compareHosts(t.hosts,e)&&a.push(t);return a}.call(this),(null!=r&&null!=(o=r[0])?o.nodes:void 0)||!1},matchRules:function(e,n,t){var r,i,a,s;if((null!=e?e.length:void 0)>0)for(null==this.data.rulesWithOverrides&&(e=u(e,o.get().ruleOverrides)),r=i=0,a=e.length;i<a;r=++i)if(s=e[r],this.matchWildcardDomain(n,s.domain)||null!=s.hosts&&this.compareHosts(s.hosts,n))return r},_getProxyState:function(e,n,t){var o,r,i,a,u;if(e=e.toLowerCase(),this.data.IPv4NotationRE.lastIndex=0,this.data.localIPsRE.lastIndex=0,!~n.indexOf(".")&&!~n.indexOf(":"))return"LOCAL";if(this.data.IPv4NotationRE.test(n)&&this.data.localIPsRE.test(n))return"LOCAL";for(u=this.data.localDomains,o=0,r=u.length;o<r;o++)if(i=u[o],this.matchWildcardDomain(n,i))return"LOCAL";return a=this.matchRules(t,n,e),null!=a?t[a].cc:"DEFAULT"}},c=function(e){var n,t,o;null==e&&(e=i),t=[];for(n in e)if(d.call(e,n))switch(o=e[n],typeof e[n]){case"function":t.push(n+": "+o.toString());break;case"object":t.push(n+": "+JSON.stringify(e[n]))}return"{ "+t.join(",")+" }"},u=function(e,n){var t,o,r,i,a,u;if(!((null!=e?e.length:void 0)>0))return[];if(!((null!=n?n.length:void 0)>0))return e;for(t=0,r=e.length;t<r;t++)for(u=e[t],o=0,i=n.length;o<i;o++)a=n[o],a.domains.indexOf(u.domain)>-1&&(u.hosts=l.concatUnique(u.hosts||[],a.hosts||[]));return e},s="e.data.IPv4NotationRE = "+r.IPv4NotationRE.toString()+";\ne.data.localIPsRE = "+r.localIPsRE.toString()+";",t.exportPAC=function(e,n,t,r){var i;return null==t&&(t=[]),null==r&&(r=[]),i="/*ZenMate*/\nfunction FindProxyForURL(url, host) {\n\n  var e = "+c()+";\n  e.data.localDomains = e.data.localDomains.concat("+JSON.stringify(r)+");\n  "+s+"\n\n  e.data.defaultLocation = '"+e+"';\n  e.data.nodeDict = "+JSON.stringify(n)+";\n  e.data.rulesWithOverrides = "+JSON.stringify(u(t,o.get().ruleOverrides))+";\n\n  var res = e._getProxyState(url, host, e.data.rulesWithOverrides);\n\n  if (res === 'LOCAL' || res === 'DIRECT' || res === 'OFF') {return 'DIRECT'};\n  if (res === 'DEFAULT') {cc = e.data.defaultLocation} else {cc = res};\n\n  var override = e.matchNodeOverride(host, cc);\n  if (override) {cc = override};\n\n  return e.nodeLookup(e.data.nodeDict, cc) || 'DIRECT';\n}"},t.getProxyStateByURL=function(e,n,t){return null==t&&(t=[]),n=n||l.parseURL(e).host||e,i._getProxyState(e,n,t)},t.getNodeDictFromLocations=function(e,n,t){var r,i,a,u,s;for(e=e.concat(o.get().alternativeNodes),u={},r=0,i=e.length;r<i;r++)a=e[r],s=a.nodes.slice(0,15).map(function(e){var n;return n=e.replace("node.zenmate.io","zenguard.org").replace("node.zenguard.co","zenguard.co"),t?n:"HTTPS "+n+":443"}),u[a.country_code]=s.join(";");return u},t.matchRules=function(e,n,t){return i.matchRules(e,n,t)}},{"./config":20,"./util":55,loglevel:1}],45:[function(e,n,t){(function(t){var o,r,i;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("page_api"),r=["zenmate.com","d1jr1idae5ms9n.cloudfront.net"],n.exports=o.interval(18e5,r).merge(o.fromEvent(i,"setPageExcludes").map(function(e){return r.concat(e)})).toProperty(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{page_api:15}],46:[function(e,n,t){"use strict";var o=e("message_handler");t.popup=new o("popup")},{message_handler:14}],47:[function(e,n,t){(function(t){var o,r,i,a,u,s,c;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,s=e("storage"),c=e("./account").user,i=e("./popup").popup,r=e("./util").parseDate,a=o.fromPromise(s.read("premium_expires_at")).flatMapError(function(){return c.map(function(e){return(null!=e?e.premium_expires_at:void 0)||null})}).merge(o.fromEvent(i,"request:hide-trialExpired").map(!1)).toProperty(),a.onValue(function(e){if(null!=e)return s.write("premium_expires_at",e)}),u=a.combine(c,function(e,n){return!1}),n.exports=u.map(function(e){return e?{view:"trialExpired",badge:"!",color:"#CC3333"}:null}).toProperty()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":46,"./util":55,storage:16}],48:[function(e,n,t){(function(n){var o,r,i,a,u,s,c,l,d,f,p,m;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("./api_request").apiRequest,l=e("./popup").popup,u=e("./install_source"),i=e("browser"),m=e("./update"),p=e("storage"),c=e("page_api"),s=e("./language").messages,a=e("cookie"),f=o.fromEventTarget(l,"request:signOut"),f.onValue(function(){return a.removeAuthCookie()}),t.signOut=d=f.merge(o.fromEvent(c,"removeCredentials")).merge(m.errors().mapError(function(e){return 403===e.status}).filter(function(e){return e})),d.map(s.toProperty()).onValue(function(e){var n,t,o;return o=e.notifications.logout,n={type:"basic",title:o.title,message:o.message},t={title:o.title,text:o.message},i.notify({chrome:{newsItem:n},firefox:t}),i.closePopup()}),t.signIn=o.fromEvent(c,"updateWithCredentials").flatMapLatest(function(e){return o.combineTemplate({install_source:u,data:e})}).flatMapLatest(function(e){var n,t;return t=e.install_source,n=e.data,n.install_source=t,r("sign_in","POST",n)}).flatMapError(function(e){return o.fromPromise(new Promise(function(n,t){return t("onload"!==e.type?e:403===+e.status?Error("errors.user.unknown_email_password"):422===+e.status?Error(e.payload.error_codes[e.payload.error_codes.length-1]):Error("errors.unknown"))}))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./install_source":37,"./language":38,"./popup":46,"./update":53,browser:10,cookie:12,page_api:15,storage:16}],49:[function(e,n,t){(function(n){var o,r,i,a,u,s;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,u=e("storage"),r=e("./popup").popup,s=e("./account").user,t.rules=i=o.fromPromise(u.read("rules")).mapError(function(){return[]}).merge(o.fromEvent(r,"request:updateRules")).filter(function(e){return e}).toProperty(),i.onValue(function(e){return u.write("rules",e)}),t.rulesEnabled=a=o.fromPromise(u.read("rules_enabled")).mapError(function(){return!1}).merge(o.fromEvent(r,"request:toggleRules")).combine(s,function(e,n){return(null!=n?n.is_premium:void 0)&&e}).skipDuplicates().toProperty(),a.onValue(function(e){return u.write("rules_enabled",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":46,storage:16}],50:[function(e,n,t){(function(t){"use strict";var o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,r=e("storage"),i=e("./popup"),a=i.popup,u=e("ciuvo_messages"),s=e("./account"),c=s.user,l=c.flatMapLatest(function(e){return o.fromPromise(r.read("disable_smartprice")).flatMapError(function(){return e.is_premium}).map(function(e){return!e}).merge(o.fromEvent(u,"disableSmartPrice").map(function(){return r.write("disable_smartprice",!0),!1})).merge(o.fromEvent(a,"request:switchSmartPrice").map(function(e){return r.write("disable_smartprice",!e),e}))});n.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":46,ciuvo_messages:11,storage:16}],51:[function(e,n,t){(function(n){var o,r,i,a,u,s;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,s=e("./util"),a=e("./rules").rules,u=e("tab-info"),i=e("./pacengine"),r=function(e,n){var t,o,r;return r=s.parseURL(e.url),t=i.getProxyStateByURL(e.url,r.host,n),o={isDefault:"DEFAULT"===t,isLocal:"LOCAL"===t,isDirect:"OFF"===t},o.isRuleActive=!(o.isDefault||o.isLocal),o.isRuleActive&&!o.isDirect&&(o.customCountry=t),o},t.tabState=o.combineTemplate({tabInfo:u,rules:a}).map(function(e){var n,t;if(t=e.tabInfo,n=e.rules,null!=t)return r(t,n)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./pacengine":44,"./rules":49,"./util":55,"tab-info":17}],52:[function(e,n,t){var o,r,i,a,u,s,c;o=e("browser"),i=e("./url-resolver"),c=e("./account").user,a=e("./util").parseDate,r=null!=(u=o.getName())?u.toLowerCase():void 0,t.showTrialEndTab=c.flatMapLatest(function(e){var n,t,o,r,u,s,c,l,d;if(e){if(r={utm_medium:"in_product",utm_source:"extension",utm_campaign:"premium_expire_{countryCode}",utm_content:"tabspawn"},u=i("account/premium",r),n=a(e.premium_expires_at||e.created_at),e.is_premium&&!e.has_recurring_subscription&&(d=new Date,d.setDate(d.getDate()+1),n<d))return{url:u,id:"premium_end_promo"};if(!e.is_premium){if(s=new Date,s.setDate(s.getDate()-7),o=new Date,o.setDate(o.getDate()-14),c=new Date,c.setDate(c.getDate()-30),l=new Date,l.setDate(l.getDate()-37),t=new Date,t.setDate(t.getDate()-40),o<n&&n<s)return{url:u,id:"premium_end_promo2"};if(l<n&&n<c)return{url:u,id:"premium_end_promo3"};if(t<n&&n<l)return{url:u,id:"premium_end_promo4"}}}}),s=c.map(function(e){var n,t,o,r,i;if(e&&!e.has_recurring_subscription)return n=a(e.premium_expires_at||e.created_at),i=new Date,i.setDate(i.getDate()+1),o=new Date,o.setDate(o.getDate()-9),r=new Date,r.setDate(r.getDate()-30),t=new Date,t.setDate(t.getDate()-40),o<n&&n<i||t<n&&n<r}),t.showTrialEndNews=s.flatMapLatest(function(e){var n,t,r;if(t={utm_medium:"in_product",utm_source:"extension",utm_campaign:"premium_expire_{countryCode}",utm_content:"banner"},r=i("account/premium",t),n=o.getLocale().toUpperCase(),e)return{text:"!["+r+"](images/tabspawn/tabspawn-"+n+".gif)",id:"premium_end_promo"}})},{"./account":3,"./url-resolver":54,"./util":55,browser:10}],53:[function(e,n,t){(function(t){"use strict";var o=function(){function e(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("./api_request"),a=i.apiRequestWithAuth,u=e("./install_id"),s=e("page_api"),c=e("storage");n.exports=r.once().delay(1e3).merge(r.interval(12e5)).merge(r.fromEvent(s,"update")).flatMap(function(){return r.combineAsArray(u.take(1),r.fromPromise(c.read("enabled_for",!1)))}).flatMapLatest(function(e){var n=o(e,2),t=n[0],r=n[1];return a("devices/"+t,"GET",{enabled_for:r})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./install_id":36,page_api:15,storage:16}],54:[function(e,n,t){(function(t){"use strict";function o(e,n){return"https://geo.zenmate.com/"+e+"."+l+(n?"?"+n:"")}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=void 0,r=e.split("?"),a=i(r,2),u=a[0],s=a[1],c=Object.keys(n).map(function(e){return e+"="+n[e]}),l=c.join("&");return l=l&&s?l+"&"+s:s||l,t=e.includes("://")?""+u+(l?"?"+l:""):o(u,l),t=t.replace("{countryCode}",d)}var i=function(){function e(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=(e("browser"),"undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,e("./language")),u=a.language,s=e("./account"),c=s.user,l="en",d="unknown";u.onValue(function(e){return l=e}),c.filter(function(e){return e}).onValue(function(e){return d=e.country_code}),n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./language":38,browser:10}],55:[function(e,n,t){t.generateInstallId=function(){var e;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.parseURL=function(e){var n,t,o;return o=/^([^:]+):\/\/([^\/:]*)(?::([\d]+))?(?:(\/[^#]*)(?:#(.*))?)?$/i,n=e.match(o),n?{scheme:n[1].toLowerCase(),host:n[2].toLowerCase(),port:n[3],path:n[4]||"/",fragment:n[5],local:"http"!==(t=n[1].toLowerCase())&&"https"!==t}:{}},t.getUTMSourcesFromURL=function(e){var n,o,r,i;for(o=t.parseURL(e).path,r=/[?&]([^=#]+)=([^&#]*)/g,i=[];n=r.exec(o);)0===n[1].indexOf("utm_")&&i.push(n[1]+"="+n[2]);return i.join(";")},t.concatUnique=function(e,n){return e.concat(n).filter(function(e,n,t){return t.indexOf(e)===n})},t.parseDate=function(e){var n,t,o,r,i,a;return n=new Date(e),isNaN(n.getTime())?(r=e.split(" "),o=r[0],a=r[1],t=o.split("-"),i=a.split(":"),new Date(t[0],t[1]-1,t[2],i[0],i[1],i[2])):n},t.shuffle=function(e){var n,t,o;for(n=e.length,o=null,t=null;0!==n;)t=Math.floor(Math.random()*n),n--,o=e[n],e[n]=e[t],e[t]=o;return e},t.chunk=function(e,n){var t,o,r;for(n=n<=0?1:n,t=[],o=0,r=e.length;o<r;)t.push(e.slice(o,o+=n));return t}},{}],56:[function(e,n,t){(function(n){"use strict";var t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("browser"),i=e("widget-messages"),a=e("storage"),u=e("./url-resolver"),s=e("./crm"),c=e("./account"),l=c.user,d=e("./language"),f=d.messages,p=e("./enabled"),m="widget_last_shown",g=864e5,w=o.fromPromise(a.read(m)).mapError(function(){return 0}).flatMapLatest(function(e){return o.later(Math.max(g+e-Date.now(),6e4),!0)}).merge(o.interval(g,!0)).merge(o.fromEvent(i,"getPremium").doAction(function(e){var n=e.url;n||(n=u("account/premium")),r.openPage(n)}).map(!1)).merge(o.fromEvent(i,"dismiss").map(!1)).toProperty().flatMapLatest(function(e){return o.combineAsArray(e,l,p)});w.onValues(function(e,n,t){i.toggle(e&&n&&!n.is_premium&&t),e&&a.write(m,Date.now())});var h=o.combineTemplate({user:l,messages:f,crm:s}).map(function(e){var n=e.user,o=e.messages,r=e.crm;return t({},o.widget[n&&n.is_verified?"verified":"unverified"],r.widget)}).toProperty();o.once(!0).merge(o.interval(g,!0)).merge(o.fromEvent(i,"hideMessage").map(!1)).combine(h,function(e,n){return[e,n]}).onValues(function(e,n){return i.toggleMessage(e,n)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./crm":25,"./enabled":32,"./language":38,"./url-resolver":54,browser:10,storage:16,"widget-messages":18}],57:[function(e,n,t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof n?"undefined":o(n))&&n.exports?n.exports=t:t()}(void 0,function(){function e(){window.__zm={toggle:function(e){document.dispatchEvent(new CustomEvent("toggle",{detail:e}))},setPageExcludes:function(e){document.dispatchEvent(new CustomEvent("setPageExcludes",{detail:e}))},update:function(){document.dispatchEvent(new CustomEvent("updateZM"))},removeCredentials:function(){document.dispatchEvent(new CustomEvent("removeCredentials"))},updateWithCredentials:function(e){document.dispatchEvent(new CustomEvent("updateWithCredentials",{detail:e}))},getData:function(e){ts=Date.now(),document.dispatchEvent(new CustomEvent("request:getData",{detail:ts})),document.addEventListener("response:getData",function(n){if(n.detail.timestamp===ts&&e)return e({user:n.detail.user,device:n.detail.device})})}}}var n="("+e+")();";document.addEventListener("toggle",function(e){chrome.runtime.sendMessage({subject:"toggle",payload:e.detail})}),document.addEventListener("setPageExcludes",function(e){chrome.runtime.sendMessage({subject:"setPageExcludes",payload:e.detail})}),document.addEventListener("updateZM",function(e){chrome.runtime.sendMessage({subject:"update"})}),document.addEventListener("removeCredentials",function(e){chrome.runtime.sendMessage({subject:"removeCredentials"})}),document.addEventListener("updateWithCredentials",function(e){chrome.runtime.sendMessage({subject:"updateWithCredentials",payload:e.detail})}),document.addEventListener("request:getData",function(e){chrome.runtime.sendMessage({subject:"request:getData",payload:{timestamp:e.detail}})}),chrome.runtime.onMessage.addListener(function(e,n){e&&e.subject&&document.dispatchEvent(new CustomEvent(e.subject,{detail:e.payload}))});var t=document.createElement("script");t.innerHTML=n;var o=document.body||document.head||document.documentElement;o.appendChild(t)})},{}]},{},[35]);